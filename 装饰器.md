# Flask高阶知识点之装饰器的使用

## 过滤用户
装饰器一个重要作用便是用于过滤未登陆的用户，当用户未登录的时候，是不能访问网站的主要功能页面的，过滤器在用户访问主要功能的视图函数之前会先进行检测，若用户为登陆则会让其跳转到登录页面，促使用户去登录自己的账户。
Flask_login中提供有login_required装饰器可以用来禁止未登录的用户访问视图，我们也可以实现自己的装饰器，来禁止未登录的用户访问关键的视图，我们常常在程序包根目录下的decorators.py脚本中存储我们自己编写的装饰器函数。
比如：
```Python
from flask import session, redirect, url_for
from functools import wraps


def login_required(func):
    @wraps(func)
    def inner(*args, **kwargs):#*args和**kwargs代表传递func函数中的所有参数
        if 'user_id' in session:
            return func(*args, **kwargs)
        else:
            return redirect(url_for('cms.login'))
    return inner
```
我们在编写自己的装饰函数时，常常会用到functools里的wraps装饰器，它的作用是防止被装饰函数func的特殊属性被改变，如果不使用该装饰器，则会导致函数名称被替换，从而导致端点出错。
装饰器可以被叠加调用，调用顺序为由外至内，对于视图函数而言，route装饰器必须在最外层。

## 给类视图添加装饰器
在类下面加上decorators = [login_required],括号内的部分为你所需的装饰器名称
